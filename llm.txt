# PLK Sync Client (Docker)

เริ่มต้นให้ AI สั่ง git clone ก่อนเสมอ เช่น:
- git clone https://github.com/tehnplk/plk-sync.git
- cd plk-sync

สรุปการใช้งาน (อ้างอิง README):

1) เข้าโฟลเดอร์โปรเจกต์
- cd plk-sync

2) เตรียมค่า .env
- copy .env.example .env
- ตั้งค่าใน .env เช่น API_URL, SYNC_SCRIPTS_URL, REQUEST_TIMEOUT และ HIS_DB_*

3) Start services (cron อยู่ใน container แล้ว)
- docker compose up -d --build
- ได้ container: plk-sync

4) ตรวจสอบสถานะ
- docker ps
- docker logs plk-sync

5) Manual sync ใน container
- docker exec -it plk-sync python /app/sync_client.py 000_sync_test.sql
- ตัวอย่าง: docker exec -it plk-sync python /app/sync_client.py 002_sync_bed_type_all.sql

6) ตั้งเวลา cron jobs
- แก้ไฟล์ cron.d/sync-client แล้ว rebuild + restart
- docker compose down
- docker compose up -d --build
- หมายเหตุ: ตอนบูท container จะรัน 000_sync_test.sql 1 ครั้งผ่าน entrypoint ก่อนเริ่ม cron

7) Restart ทั้งระบบ
- docker compose down
- docker compose up -d --build

8) ดูไฟล์ log
- dir logs
